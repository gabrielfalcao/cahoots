(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{72:function(e,t,a){e.exports=a(93)},93:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(18),o=a.n(l),c=a(70),u=a(10),i=a(11),s=a(22),m=a(21),h=a(6),d=a(32),E=a(40),p=a(42),f=a(41),g=a(28),v=a(29),b=a(68),k=a(35),O=a(19),j=a(12),y=a(25);function w(e){return Object(y.c)((function(e){return Object(j.a)({},e)}),(function(e){return{}}))(e)}var _=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.auth;return r.a.createElement(g.a,{fluid:"md"},r.a.createElement(v.a,null,e.profile?r.a.createElement(O.a,{md:12},r.a.createElement("h1",null,"Hello ",e.profile.preferred_username),r.a.createElement("h2",null,"Welcome to Fake NOM"),r.a.createElement("hr",null),r.a.createElement(k.a,{bg:"light",text:"dark",style:{width:"18rem"}},r.a.createElement(k.a.Header,null,"Access Token"),r.a.createElement(k.a.Body,null,r.a.createElement(k.a.Title,null,"For usage with API"),r.a.createElement(k.a.Text,null,r.a.createElement(b.a.Control,{as:"textarea",rows:"3"},e.access_token)))),r.a.createElement("hr",null),r.a.createElement("h3",null,"Your Session Metadata:"),r.a.createElement("p",null,r.a.createElement("pre",null,JSON.stringify(e,null,4)))):r.a.createElement(h.c,{to:"/login"})))}}]),a}(n.Component);_.defaultProps={auth:{scope:null,profile:null}};var S=w(_),T=a(58),C=a(66),L=a(34),N=function e(){Object(u.a)(this,e)};N.stsAuthority="https://id.t.newstore.net/auth/realms/gabriel-NA-43928/",N.clientId="fake-nom",N.clientRoot="https://reactkeycloak.ngrok.io",N.clientScope="openid profile email template:read template:write",N.apiRoot="https://keycloak.fulltest.co/api/";var M=function(){function e(){Object(u.a)(this,e),this.userManager=void 0;var t={authority:N.stsAuthority,client_id:N.clientId,redirect_uri:"".concat(N.clientRoot,"/oauth2/callback"),silent_redirect_uri:"".concat(N.clientRoot,"/oauth2/refresh"),post_logout_redirect_uri:"".concat(N.clientRoot),response_type:"code",scope:N.clientScope};this.userManager=new L.UserManager(t),L.Log.logger=console,L.Log.level=L.Log.INFO}return Object(i.a)(e,[{key:"getUser",value:function(){return this.userManager.getUser()}},{key:"login",value:function(){return this.userManager.signinRedirect()}},{key:"renewToken",value:function(){return this.userManager.signinSilent()}},{key:"logout",value:function(){return this.userManager.signoutRedirect()}},{key:"handleCallback",value:function(){return new L.UserManager({response_mode:"query"}).signinRedirectCallback()}}]),e}(),A=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).authService=void 0,n.authService=new M,n.state={user:null},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.authService.handleCallback().then((function(t){e.setState({user:t}),e.props.setUser(t),console.log("callback user",t),T.info("callback succeedded")})).catch((function(e){T.error(e)}))}},{key:"render",value:function(){var e=this.state.user;return console.log(e),null!==e?r.a.createElement(h.c,{to:"/"}):r.a.createElement(g.a,null,r.a.createElement(v.a,null,r.a.createElement(O.a,null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(C.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))))}}]),a}(n.Component);var U=Object(y.c)((function(e){return Object(j.a)({},e)}),{setUser:function(e){return{type:"NEW_AUTHENTICATION",user:e}}})(A),I=a(49),R=a(17),F=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).authService=void 0,n.login=function(){n.authService.login()},n.authService=new M,n}return Object(i.a)(a,[{key:"render",value:function(){return this.props.auth.profile?r.a.createElement(h.c,{to:"/"}):r.a.createElement(g.a,{fluid:"md"},r.a.createElement(v.a,null,r.a.createElement(O.a,{md:12},r.a.createElement(R.a.Dialog,null,r.a.createElement(R.a.Header,null,r.a.createElement(R.a.Title,null,"You will be taken to KeyCloak")),r.a.createElement(R.a.Body,null,r.a.createElement("p",null,"Your user needs at least the scopes"," ",r.a.createElement("code",null,"template:read")," or"," ",r.a.createElement("code",null,"template:write")," to use the",r.a.createElement("a",{href:"https://keycloak.fulltest.co"},"Fake NewStore API v1"),".")),r.a.createElement(R.a.Footer,null,r.a.createElement(I.a,{onClick:this.login,variant:"primary"},"Proceed"))))))}}]),a}(n.Component);F.defaultProps={auth:{scope:null,profile:null}};var P=w(F),D=w(function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).authService=void 0,n.logout=function(){n.authService.logout()},n.authService=new M,n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(g.a,{fluid:"md"},r.a.createElement(v.a,null,r.a.createElement(O.a,{md:12},r.a.createElement(R.a.Dialog,null,r.a.createElement(R.a.Header,null,r.a.createElement(R.a.Title,null,"Do you really wish to logout?")),r.a.createElement(R.a.Footer,null,r.a.createElement(I.a,{onClick:this.logout,variant:"danger"},"Logout"))))))}}]),a}(n.Component));function H(e){return!e||(!e.scope||"string"!==typeof e.scope)}var B=w(function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.auth;function t(t){var a=t.children,n=Object(c.a)(t,["children"]);return r.a.createElement(h.d,Object.assign({},n,{render:function(t){var n=t.location;return H(e)?r.a.createElement(h.c,{to:{pathname:"/login",state:{from:n}}}):a}}))}return r.a.createElement(d.BrowserRouter,null,r.a.createElement(p.a,{bg:"light",expand:"lg",sticky:"top"},r.a.createElement(E.LinkContainer,{to:"/"},r.a.createElement(p.a.Brand,null,"Fake NOM")),r.a.createElement(p.a.Toggle,{"aria-controls":"fakenom-navbar-nav"}),r.a.createElement(p.a.Collapse,{className:"justify-content-end",id:"fakenom-navbar-nav"},r.a.createElement(f.a,null,H(e)?r.a.createElement(E.LinkContainer,{to:"/login"},r.a.createElement(f.a.Link,null,"Login")):r.a.createElement(r.a.Fragment,null,r.a.createElement(E.LinkContainer,{to:"/"},r.a.createElement(f.a.Link,null,"Home")),r.a.createElement(E.LinkContainer,{to:"/logout"},r.a.createElement(f.a.Link,null,"Logout")))))),r.a.createElement(h.g,null,r.a.createElement(h.d,{path:"/oauth2/callback"},r.a.createElement(U,null)),r.a.createElement(h.d,{path:"/login"},r.a.createElement(P,null)),r.a.createElement(h.d,{path:"/logout"},r.a.createElement(D,null)),r.a.createElement(t,{path:"/"},r.a.createElement(S,null))))}}]),a}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(86);var x=a(23),W={},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"NEW_AUTHENTICATION":var a=t.user,n=a.id_token,r=a.access_token,l=a.refresh_token,o=a.scope,c=a.profile;return Object(j.a)({},e,{scope:o,profile:c,user:t.user,id_token:n,access_token:r,refresh_token:l});case"LOGOUT":return{};default:return Object(j.a)({},e)}},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LOGOUT":case"UNLOAD_TEMPLATES":return{};case"SET_TEMPLATES":default:return Object(j.a)({},e)}},G=a(69),X=a(67),q=a.n(X)()(),K={},V=Object(x.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.type,Object(j.a)({},e)}),Object(x.c)({auth:J,templates:Y,router:Object(G.a)(q)})),$=a(59),z=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||x.d,Q=Object($.load)({namespace:"fakenom.state"});console.log("loaded storage",Q);var Z=Object(x.e)(V,Q,z(Object(x.a)(Object($.save)({namespace:"fakenom.state"}))));o.a.render(r.a.createElement(y.a,{store:Z},r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[72,1,2]]]);
//# sourceMappingURL=main.6fccc7ba.chunk.js.map