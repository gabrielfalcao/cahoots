(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{68:function(e,t,a){e.exports=a(84)},84:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(24),c=a.n(l),o=a(66),u=a(10),i=a(12),s=a(17),m=a(16),E=a(6),h=a(36),d=a(33),p=a(43),f=a(37),v=a(25),g=a(20),k=a(35),b=a(11),O=a(9),y=a(13),j=a(22);function w(e){return Object(j.c)((function(e){return Object(y.a)({},e)}),(function(e){return{}}))(e)}var _=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.auth;return r.a.createElement(v.a,{fluid:"md"},r.a.createElement(g.a,null,e.profile?r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{md:12},r.a.createElement("h1",null,"Hello ",e.profile.preferred_username),r.a.createElement("h2",null,"Welcome to Fake NOM"),r.a.createElement("hr",null)),r.a.createElement(O.a,{md:4},r.a.createElement(b.a,{bg:"success",text:"white",style:{width:"18rem"}},r.a.createElement(b.a.Header,null,"Access Token"),r.a.createElement(b.a.Body,null,r.a.createElement(b.a.Title,null,"For usage with API"),r.a.createElement(b.a.Text,null,r.a.createElement(k.a.Control,{as:"textarea",rows:"3",readOnly:!0,value:e.access_token}))))),r.a.createElement(O.a,{md:4},r.a.createElement(b.a,{bg:"warning",text:"white",style:{width:"18rem"}},r.a.createElement(b.a.Header,null,"Refresh Token"),r.a.createElement(b.a.Body,null,r.a.createElement(b.a.Title,null,"For usage with API"),r.a.createElement(b.a.Text,null,r.a.createElement(k.a.Control,{as:"textarea",rows:"3",readOnly:!0,value:e.refresh_token}))))),r.a.createElement(O.a,{md:4},r.a.createElement(b.a,{bg:"info",text:"white",style:{width:"18rem"}},r.a.createElement(b.a.Header,null,"Id Token"),r.a.createElement(b.a.Body,null,r.a.createElement(b.a.Title,null,"For usage with API"),r.a.createElement(b.a.Text,null,r.a.createElement(k.a.Control,{as:"textarea",rows:"3",readOnly:!0,value:e.id_token}))))),r.a.createElement(O.a,{md:12},r.a.createElement("hr",null),r.a.createElement("h3",null,"Scopes Allowed:"),r.a.createElement("strong",null,r.a.createElement("pre",{className:"text-info"},e.scope))),r.a.createElement(O.a,{md:12},r.a.createElement("hr",null),r.a.createElement("h3",null,"ID Token claims:"),r.a.createElement(k.a,null,Object.keys(e.profile).map((function(t,a){return r.a.createElement(k.a.Group,{as:g.a,key:t,controlId:"form-control-".concat(t)},r.a.createElement(k.a.Label,{column:!0,sm:2},t),r.a.createElement(O.a,{sm:10},r.a.createElement(k.a.Control,{type:"text",readOnly:!0,value:e.profile[t]})))}))))):r.a.createElement(E.c,{to:"/login"})))}}]),a}(n.Component);_.defaultProps={auth:{scope:null,profile:null}};var T=w(_),L=a(32),C=function(){function e(t){Object(u.a)(this,e),this.auth=void 0,this.auth=t}return Object(i.a)(e,[{key:"matches",value:function(e){return null!==this.auth.scope.match(e)}},{key:"canRead",value:function(){return this.matches(/template:read/)}},{key:"canWrite",value:function(){return this.matches(/template:write/)}}]),e}(),S=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.auth,t=new C(e);return r.a.createElement(v.a,{fluid:"md"},r.a.createElement(g.a,null,r.a.createElement(O.a,{md:12},r.a.createElement("h1",null,"Template Admin"),r.a.createElement("hr",null),r.a.createElement("p",null,t.canRead()?r.a.createElement(L.a,{variant:"info"},"List Templates"):null),r.a.createElement("p",null,t.canWrite()?r.a.createElement(L.a,{variant:"success"},"Create Template"):null))))}}]),a}(n.Component);S.defaultProps={auth:{access_token:null,scope:""}};var A=w(S),N=a(64),I=a(39),x=function e(){Object(u.a)(this,e)};x.stsAuthority="https://id.t.newstore.net/auth/realms/gabriel-NA-43928/",x.clientId="fake-nom",x.clientRoot="https://reactkeycloak.ngrok.io",x.clientScope="openid profile email template:read template:write",x.apiRoot="https://keycloak.fulltest.co/api/";var M=function(){function e(){Object(u.a)(this,e),this.userManager=void 0;var t={authority:x.stsAuthority,client_id:x.clientId,redirect_uri:"".concat(x.clientRoot,"/oauth2/callback"),silent_redirect_uri:"".concat(x.clientRoot,"/oauth2/refresh"),post_logout_redirect_uri:"".concat(x.clientRoot),response_type:"code",scope:x.clientScope};this.userManager=new I.UserManager(t),I.Log.logger=console,I.Log.level=I.Log.INFO}return Object(i.a)(e,[{key:"login",value:function(){return this.userManager.signinRedirect()}},{key:"logout",value:function(){return this.userManager.signoutRedirect()}},{key:"handleCallback",value:function(){return new I.UserManager({response_mode:"query"}).signinRedirectCallback()}}]),e}(),P=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).authService=void 0,n.authService=new M,n.state={user:null},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.authService.handleCallback().then((function(t){e.props.setUser(t)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return this.props.auth.profile?r.a.createElement(E.c,{to:"/"}):r.a.createElement(v.a,{fluid:"md"},r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(g.a,{className:"justify-content-md-center"},r.a.createElement(O.a,{md:6},r.a.createElement("p",null,"redirecting..."),r.a.createElement(N.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"login authorized, you are being redirected")))))}}]),a}(n.Component),R=Object(j.c)((function(e){return Object(y.a)({},e)}),{setUser:function(e){return{type:"NEW_AUTHENTICATION",user:e}}})(P),F=a(23),U=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).authService=void 0,n.login=function(){n.authService.login()},n.authService=new M,n}return Object(i.a)(a,[{key:"render",value:function(){return this.props.auth.access_token?r.a.createElement(E.c,{to:"/"}):r.a.createElement(v.a,{fluid:"md"},r.a.createElement(g.a,null,r.a.createElement(O.a,{md:12},r.a.createElement(F.a.Dialog,null,r.a.createElement(F.a.Header,null,r.a.createElement(F.a.Title,null,"Login with KeyCloak")),r.a.createElement(F.a.Body,null,r.a.createElement("p",null,"Your user needs at least the scopes"," ",r.a.createElement("code",null,"template:read")," or"," ",r.a.createElement("code",null,"template:write")," to use the",r.a.createElement("a",{href:"https://keycloak.fulltest.co"},"Fake NewStore API v1"),".")),r.a.createElement(F.a.Footer,null,r.a.createElement(d.LinkContainer,{to:"/logout"},r.a.createElement(L.a,{variant:"primary"},"Logout")),r.a.createElement(L.a,{onClick:this.login,variant:"success"},"Proceed"))))))}}]),a}(n.Component);U.defaultProps={auth:{scope:null,profile:null}};var H=w(U),B=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).authService=void 0,n.logout=function(){n.authService.logout().then((function(){n.props.logout()}))},n.authService=new M,n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(v.a,{fluid:"md"},r.a.createElement(g.a,null,r.a.createElement(O.a,{md:12},r.a.createElement(F.a.Dialog,null,r.a.createElement(F.a.Header,null,r.a.createElement(F.a.Title,null,"Do you really wish to logout?")),r.a.createElement(F.a.Footer,null,r.a.createElement(L.a,{onClick:this.logout,variant:"danger"},"Logout"))))))}}]),a}(n.Component),D=Object(j.c)((function(e){return Object(y.a)({},e)}),{logout:function(){return{type:"LOGOUT"}}})(B);function W(e){return!e||(!e.scope||"string"!==typeof e.scope)}var G=w(function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.auth;function t(t){var a=t.children,n=Object(o.a)(t,["children"]);return r.a.createElement(E.d,Object.assign({},n,{render:function(t){var n=t.location;return W(e)?r.a.createElement(E.c,{to:{pathname:"/login",state:{from:n}}}):a}}))}return r.a.createElement(h.BrowserRouter,null,r.a.createElement(p.a,{bg:"light",expand:"lg",sticky:"top"},r.a.createElement(d.LinkContainer,{to:"/"},r.a.createElement(p.a.Brand,null,"Fake NOM")),r.a.createElement(p.a.Toggle,{"aria-controls":"fakenom-navbar-nav"}),r.a.createElement(p.a.Collapse,{className:"justify-content-end",id:"fakenom-navbar-nav"},r.a.createElement(f.a,null,W(e)?r.a.createElement(d.LinkContainer,{to:"/login"},r.a.createElement(f.a.Link,null,"Login")):r.a.createElement(r.a.Fragment,null,r.a.createElement(d.LinkContainer,{to:"/profile"},r.a.createElement(f.a.Link,null,"Home")),r.a.createElement(d.LinkContainer,{to:"/admin"},r.a.createElement(f.a.Link,null,"Template API Admin")),r.a.createElement(f.a.Link,{href:"/api"},"Fake NewStore API v1"),r.a.createElement(d.LinkContainer,{to:"/logout"},r.a.createElement(f.a.Link,null,"Logout")))))),r.a.createElement(E.g,null,r.a.createElement(E.d,{path:"/oauth2/callback"},r.a.createElement(R,null)),r.a.createElement(E.d,{path:"/login"},r.a.createElement(H,null)),r.a.createElement(E.d,{path:"/logout"},r.a.createElement(D,null)),r.a.createElement(E.d,{exact:!0,path:"/"},r.a.createElement(E.c,{to:"/admin"})),r.a.createElement(t,{path:"/profile"},r.a.createElement(T,null)),r.a.createElement(t,{path:"/admin"},r.a.createElement(A,null))))}}]),a}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(80);var J=a(27),X={},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"NEW_AUTHENTICATION":var a=t.user,n=a.id_token,r=a.access_token,l=a.refresh_token,c=a.scope,o=a.profile;return Object(y.a)({},e,{scope:c,profile:o,id_token:n,access_token:r,refresh_token:l});case"LOGOUT":return{scope:null,profile:null,id_token:null,access_token:null,refresh_token:null};default:return Object(y.a)({},e)}},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LOGOUT":case"UNLOAD_TEMPLATES":return{};case"SET_TEMPLATES":default:return Object(y.a)({},e)}},K=a(65),V=a(14),Y=Object(V.a)(),$={},Q=Object(J.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.type,Object(y.a)({},e)}),Object(J.c)({auth:q,templates:z,router:Object(K.a)(Y)})),Z=a(57),ee=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||J.d,te=Object(Z.load)({namespace:"fakenom.state"});console.log("loaded storage",te);var ae=Object(J.e)(Q,te,ee(Object(J.a)(Object(Z.save)({namespace:"fakenom.state"}))));c.a.render(r.a.createElement(j.a,{store:ae},r.a.createElement(r.a.StrictMode,null,r.a.createElement(G,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[68,1,2]]]);
//# sourceMappingURL=main.e759470a.chunk.js.map